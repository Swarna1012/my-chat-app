{"ast":null,"code":"var _jsxFileName = \"/home/divum/Desktop/Training/project/ChattingApp-master/frontend/src/Components/MainPage/MainPage.js\";\nimport React, { Component, useContext } from \"react\";\nimport './MainPage.css';\nimport Post from \"../Post/Post\";\n// import post from \"../../images/post1.jpg\";\nimport uploadImage from '../../images/upload1.png';\nimport { storage } from '../firebase';\nimport SignIn from \"../SignIn/SignIn\";\n// import {UserContext, useUser} from '../../context/UserContext';\n\nclass MainPage extends Component {\n  constructor(props) {\n    super(props);\n    this.getPost = () => {\n      const thisContext = this;\n      // let data =[\n      //     {\n      //         \"postId\": \"123456\",\n      //         \"username\": \"swarna\",\n      //         \"postImageURL\": \"https://w0.peakpx.com/wallpaper/917/343/HD-wallpaper-nature-night.jpg\",\n      //         \"timeStamp\": \"111111\",\n      //         \"likes\": \"7989\"\n      //     },\n      //     {\n      //         \"postId\": \"123456\",\n      //         \"username\": \"arun\",\n      //         \"postImageURL\": \"https://w0.peakpx.com/wallpaper/917/343/HD-wallpaper-nature-night.jpg\",\n      //         \"timeStamp\": \"111111\",\n      //         \"likes\": \"7989\"\n      //     },\n      //     {\n      //         \"postId\": \"123456\",\n      //         \"username\": \"anu\",\n      //         \"postImageURL\": \"https://w0.peakpx.com/wallpaper/917/343/HD-wallpaper-nature-night.jpg\",\n      //         \"timeStamp\": \"111111\",\n      //         \"likes\": \"7989\"\n      //     }\n      // ];\n      fetch(\"http://localhost:8080/post/\" + JSON.parse(localStorage.getItem(\"users\")).uid) //get post of following users\n      .then(response => response.json()).then(data => {\n        console.log(data);\n        thisContext.setState({\n          postArray: data\n        });\n      });\n    };\n    this.state = {\n      postArray: [],\n      progressBar: \"\"\n    };\n  }\n  componentDidMount() {\n    this.getPost();\n  }\n  // upload = (event) =>{\n  //     let image = event.target.files[0];\n  //     const thisContext = this;\n  //     if(image == null || image == undefined)\n  //         return;\n  //     var uploadTask = storage.ref(\"images\").child(image.name).put(image);\n  //     uploadTask.on(\n  //         \"state_changed\",\n  //         function(snapshot){\n  //             var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n  //             thisContext.setState({progressBar : progress})\n  //         },\n  //         function(error){\n\n  //         },\n  //         function(){\n  //             uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL){\n  //                 console.log(downloadURL);\n\n  //                 let payload = {\n  //                     \"postId\": Math.floor(Math.random() * 100000).toString(),\n  //                     \"userId\": JSON.parse(localStorage.getItem(\"users\")).uid,\n  //                     \"path\": downloadURL,\n  //                     \"postedAt\": new Date().getTime(),\n  //                     \"likesCount\": 0\n  //                 };\n\n  //                 const requestOptions ={\n  //                     method: \"POST\",\n  //                     headers: { 'Content-Type': 'application/json' },\n  //                     body : JSON.stringify(payload),\n  //                 }\n\n  //                 fetch(\"http://localhost:8080/post\",requestOptions)\n  //                 .then(response => response.json())\n  //                 .then(data => {\n  //                     console.log(data);\n  //                     thisContext.getPost();\n  //                     thisContext.getPost();\n\n  //                     const signInInstance = new SignIn();\n  //                     signInInstance.getUserDetails();\n  //                     console.log(signInInstance.getUserDetails);\n  //                 })\n  //                 .catch(error =>{\n\n  //                 })\n  //             })\n  //         });\n  // }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainpage_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"upload_text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, this.state.progressBar), this.state.postArray.map((item, index) => /*#__PURE__*/React.createElement(Post, {\n      id: item.postId,\n      username: item.username,\n      postImage: item.path,\n      likes: item.likesCount,\n      uid: item.userId,\n      alreadyLiked: item.alreadyLiked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }\n    })));\n  }\n}\nexport default MainPage;","map":{"version":3,"names":["React","Component","useContext","Post","uploadImage","storage","SignIn","MainPage","constructor","props","getPost","thisContext","fetch","JSON","parse","localStorage","getItem","uid","then","response","json","data","console","log","setState","postArray","state","progressBar","componentDidMount","render","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","item","index","id","postId","username","postImage","path","likes","likesCount","userId","alreadyLiked"],"sources":["/home/divum/Desktop/Training/project/ChattingApp-master/frontend/src/Components/MainPage/MainPage.js"],"sourcesContent":["import React,{Component, useContext} from \"react\";\nimport './MainPage.css'\nimport Post from \"../Post/Post\";\n// import post from \"../../images/post1.jpg\";\nimport uploadImage from '../../images/upload1.png';\nimport {storage} from '../firebase';\nimport SignIn from \"../SignIn/SignIn\";\n// import {UserContext, useUser} from '../../context/UserContext';\n\nclass MainPage extends Component {\n\n    constructor(props) { \n        super(props);\n        this.state = {  \n            postArray:[],\n            progressBar:\"\",\n        }\n    }\n    \n    componentDidMount(){\n        this.getPost();\n    }\n\n    getPost=()=>{\n        const thisContext = this;\n        // let data =[\n        //     {\n        //         \"postId\": \"123456\",\n        //         \"username\": \"swarna\",\n        //         \"postImageURL\": \"https://w0.peakpx.com/wallpaper/917/343/HD-wallpaper-nature-night.jpg\",\n        //         \"timeStamp\": \"111111\",\n        //         \"likes\": \"7989\"\n        //     },\n        //     {\n        //         \"postId\": \"123456\",\n        //         \"username\": \"arun\",\n        //         \"postImageURL\": \"https://w0.peakpx.com/wallpaper/917/343/HD-wallpaper-nature-night.jpg\",\n        //         \"timeStamp\": \"111111\",\n        //         \"likes\": \"7989\"\n        //     },\n        //     {\n        //         \"postId\": \"123456\",\n        //         \"username\": \"anu\",\n        //         \"postImageURL\": \"https://w0.peakpx.com/wallpaper/917/343/HD-wallpaper-nature-night.jpg\",\n        //         \"timeStamp\": \"111111\",\n        //         \"likes\": \"7989\"\n        //     }\n        // ];\n        fetch(\"http://localhost:8080/post/\" + JSON.parse(localStorage.getItem(\"users\")).uid)             //get post of following users\n            .then(response => response.json())\n            .then(data => {\n                console.log(data);\n                thisContext.setState({postArray: data});\n\n        });\n    }\n\n    // upload = (event) =>{\n    //     let image = event.target.files[0];\n    //     const thisContext = this;\n    //     if(image == null || image == undefined)\n    //         return;\n    //     var uploadTask = storage.ref(\"images\").child(image.name).put(image);\n    //     uploadTask.on(\n    //         \"state_changed\",\n    //         function(snapshot){\n    //             var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n    //             thisContext.setState({progressBar : progress})\n    //         },\n    //         function(error){\n\n    //         },\n    //         function(){\n    //             uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL){\n    //                 console.log(downloadURL);\n                    \n    //                 let payload = {\n    //                     \"postId\": Math.floor(Math.random() * 100000).toString(),\n    //                     \"userId\": JSON.parse(localStorage.getItem(\"users\")).uid,\n    //                     \"path\": downloadURL,\n    //                     \"postedAt\": new Date().getTime(),\n    //                     \"likesCount\": 0\n    //                 };\n                    \n    //                 const requestOptions ={\n    //                     method: \"POST\",\n    //                     headers: { 'Content-Type': 'application/json' },\n    //                     body : JSON.stringify(payload),\n    //                 }\n        \n    //                 fetch(\"http://localhost:8080/post\",requestOptions)\n    //                 .then(response => response.json())\n    //                 .then(data => {\n    //                     console.log(data);\n    //                     thisContext.getPost();\n    //                     thisContext.getPost();\n\n    //                     const signInInstance = new SignIn();\n    //                     signInInstance.getUserDetails();\n    //                     console.log(signInInstance.getUserDetails);\n    //                 })\n    //                 .catch(error =>{\n        \n    //                 })\n    //             })\n    //         });\n    // }\n\n    render() { \n        return (  \n            <div className=\"mainpage_container\">\n                <div >\n\n                    {/* <div className=\"mainpage_divider\"></div> */}\n                    {/* <div className=\"fileupload\">\n                        <label for=\"file-upload\">\n                            <img className=\"mainpage_uploadicon\" src={uploadImage}></img>\n                        </label>\n                        <input onChange={this.upload} id=\"file-upload\" type=\"file\"/>\n                    </div> */}\n                    {/* <div className=\"mainpage_divider\"></div> */}\n                </div>\n                <div className=\"upload_text\">{this.state.progressBar}</div>\n                {\n                    this.state.postArray.map((item,index)=>(\n                        <Post id={item.postId} username={item.username} postImage={item.path} likes={item.likesCount} uid={item.userId}\n                            alreadyLiked={item.alreadyLiked} />\n                    ))\n                }\n            </div>\n        );\n    }\n}\n \nexport default MainPage;"],"mappings":";AAAA,OAAOA,KAAK,IAAEC,SAAS,EAAEC,UAAU,QAAO,OAAO;AACjD,OAAO,gBAAgB;AACvB,OAAOC,IAAI,MAAM,cAAc;AAC/B;AACA,OAAOC,WAAW,MAAM,0BAA0B;AAClD,SAAQC,OAAO,QAAO,aAAa;AACnC,OAAOC,MAAM,MAAM,kBAAkB;AACrC;;AAEA,MAAMC,QAAQ,SAASN,SAAS,CAAC;EAE7BO,WAAWA,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IAAC,KAWjBC,OAAO,GAAC,MAAI;MACR,MAAMC,WAAW,GAAG,IAAI;MACxB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAC,KAAK,CAAC,6BAA6B,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAACC,GAAG,CAAC,CAAa;MAAA,CAC5FC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;QACVC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;QACjBV,WAAW,CAACa,QAAQ,CAAC;UAACC,SAAS,EAAEJ;QAAI,CAAC,CAAC;MAE/C,CAAC,CAAC;IACN,CAAC;IA1CG,IAAI,CAACK,KAAK,GAAG;MACTD,SAAS,EAAC,EAAE;MACZE,WAAW,EAAC;IAChB,CAAC;EACL;EAEAC,iBAAiBA,CAAA,EAAE;IACf,IAAI,CAAClB,OAAO,CAAC,CAAC;EAClB;EAoCA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EAEAmB,MAAMA,CAAA,EAAG;IACL,oBACI7B,KAAA,CAAA8B,aAAA;MAAKC,SAAS,EAAC,oBAAoB;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBAC/BrC,KAAA,CAAA8B,aAAA;MAAAE,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAUK,CAAC,eACNrC,KAAA,CAAA8B,aAAA;MAAKC,SAAS,EAAC,aAAa;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAE,IAAI,CAACX,KAAK,CAACC,WAAiB,CAAC,EAEvD,IAAI,CAACD,KAAK,CAACD,SAAS,CAACa,GAAG,CAAC,CAACC,IAAI,EAACC,KAAK,kBAChCxC,KAAA,CAAA8B,aAAA,CAAC3B,IAAI;MAACsC,EAAE,EAAEF,IAAI,CAACG,MAAO;MAACC,QAAQ,EAAEJ,IAAI,CAACI,QAAS;MAACC,SAAS,EAAEL,IAAI,CAACM,IAAK;MAACC,KAAK,EAAEP,IAAI,CAACQ,UAAW;MAAC9B,GAAG,EAAEsB,IAAI,CAACS,MAAO;MAC3GC,YAAY,EAAEV,IAAI,CAACU,YAAa;MAAAjB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CACzC,CAEJ,CAAC;EAEd;AACJ;AAEA,eAAe9B,QAAQ"},"metadata":{},"sourceType":"module"}